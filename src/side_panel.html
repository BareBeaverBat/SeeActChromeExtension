<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <title>SeeAct Chrome Agent</title>
</head>
<body class="h-full bg-gray-100 p-2 space-y-1">
<div id="eula-complaint" hidden="hidden">
    <span class="text-xl block">Extension functionality is disabled until EULA and Privacy Policy have been reviewed and agreed to</span>
    <button id="eula-review" class="border-2 p-1 m-1 font-bold">Review EULA and Privacy Policy</button>
</div>

<div id="annotator-mode-container" class="space-y-1 bg-fuchsia-100/50 border p-1 rounded-lg" style="display: none">
    <h2 class="text-xl font-bold text-center">Annotator Mode</h2>

    <label for="action-type" class="block text-base font-medium">Action Type</label>
    <select id="action-type" class="p-2">
        <option value="CLICK" selected>Click</option>
        <option value="PRESS_ENTER">Press Enter</option>
        <!-- idea for later refinement (if PRESS_ENTER ends up actually being used at all often):
              if mouse cursor is not in viewport and action type is PRESS_ENTER, have content script
              try to figure out the target element based on which field is focused instead of which
              is hovered-over; would need to explain this in the ui somewhere-->
    </select>
    <label for="state-change-severity" class="block text-base font-medium"
           title="How dangerous the action-to-be-collected is, i.e. how impactful and/or hard-to-reverse is the state-change that it would trigger?">State
        Change Severity</label>
    <select id="state-change-severity" class="p-2">
        <option value="LOW" title="TODO get explanation/labelling-guidance from Boyuan/Maggie/Prof-Su" selected>Low
        </option>
        <option value="MEDIUM" title="TODO get explanation/labelling-guidance from Boyuan/Maggie/Prof-Su">Medium
        </option>
        <option value="HIGH" title="TODO get explanation/labelling-guidance from Boyuan/Maggie/Prof-Su">High</option>
    </select>

    <div class="space-y-1">
        <label for="annotator-explanation" class="block text-base font-medium"
               title="TODO get and insert guidance from Boyuan/Maggie/Prof-Su about what kinds of details from annotators would actually be useful here">
            Description/Explanation (Optional)
        </label>
        <textarea id="annotator-explanation"
                  class="w-full h-12 text-sm p-2 bg-fuchsia-100/50 border rounded resize-y"></textarea>
    </div>
    <span class="text-sm font-medium"
          title="After ensuring the state-changing action's details are appropriately filled out here, put your cursor over the element which it would be state-changing to interact with, then press Alt-Shift-G. If you want the focused/active element (e.g. a text field you just interacted with) to be the target element, make sure the mouse cursor is not hovering over any interactive elements, or just keep it perfectly still when pressing the keyboard shortcut. Otherwise, make sure you keep moving the mouse cursor around very slightly (without leaving the target element) just before and just after pressing Alt-Shift-G (otherwise browser limitations will prevent the extension from seeing the mouse position and figuring out the target element)">Action Capture Reminder</span>
    <div id="annotator-status-update-container" class="flex items-center h-12 overflow-y-auto mb-1">
        <img src="../images/status_update_icon.webp" alt="status icon" class="w-auto h-8 mr-2">
        <div id="annotator-status" class="text-sm">No status update available at the moment.</div>
    </div>
</div>

<div class="border bg-emerald-100/50 rounded-lg p-1">
    <div class="flex justify-between">
        <label for="task-spec" class="block text-lg font-semibold"
               title="the task should be completable when starting from the website which is loaded in the current tab">
            Agent Task Specification
        </label>
        <button id="user-guide" class="border-2 px-0.5 py-0 rounded-lg font-bold">User Guide</button>
    </div>
    <textarea id="task-spec" class="w-full h-24 p-2 mb-1 border bg-emerald-100/50 rounded resize-y"
              placeholder="Enter a task specification for the SeeAct agent"></textarea>

    <div class="flex justify-evenly">
        <button id="start-agent" class="flex items-center px-2 py-1 bg-green-200 hover:bg-green-300 rounded">
            <img src="../images/task_start_icon.webp" alt="start task" class="w-auto h-5 mr-2">
            Start Agent
        </button>
        <button id="end-task" class="flex items-center px-2 py-1 bg-purple-200 hover:bg-purple-300 rounded" disabled>
            <img src="../images/task_kill_icon.webp" alt="terminate task" class="w-auto h-5 mr-2">
            Terminate Task
        </button>
        <!--    todo why doesn't this button, when disabled, look as much greyer than normal as start task button does when disabled?-->
    </div>
</div>

<hr class="border-gray-300">


<div id="history-container" class="space-y-1 border bg-indigo-100/50 rounded-lg p-1">
    <label id="history-label" class="block text-lg font-semibold text-center">Actions
        History</label>
    <ol id="history" class="h-36 overflow-y-auto p-4 space-y-1 resize-y list-decimal rounded list-outside">
        <!-- History items will be added here dynamically -->
    </ol>
</div>

<div class="space-y-1 border bg-cyan-100/50 rounded-lg p-1">
    <div id="agent-status-update-container" class="flex items-center h-12 overflow-y-auto mb-1">
        <img src="../images/status_update_icon.webp" alt="status icon" class="w-auto h-8 mr-2">
        <div id="agent-status" class="text-sm">No status update available at the moment.</div>
    </div>
    <div class="flex items-center">
        <img src="../images/proposed_action_icon.webp" alt="hopeful robot face with lightbulb" class="w-auto h-6 mr-2">
        <label class="text-lg font-semibold px-2 py-1 rounded">Pending Action</label>
    </div>
    <div id="pending-action" class="h-24 mt-0.5 border-2 p-2 overflow-y-auto text-sm"></div>
</div>

<div id="monitor-mode-container" class="space-y-1 bg-violet-100/50 border p-1 rounded-lg">
    <h2 class="text-xl font-bold text-center">Monitor Mode</h2>
    <div class="space-y-1">
        <label for="monitor-feedback" class="block text-sm font-medium"
               title="Hint- if you reject the proposed action after doing something to the page, please mention that thing in the feedback">
            Feedback to Agent
        </label>
        <textarea id="monitor-feedback" class="w-full h-24 text-sm p-2 bg-violet-100/50 border rounded resize-y"
                  disabled></textarea>
    </div>
    <div class="flex justify-evenly">
        <button id="approve" class="flex items-center px-2 py-1 bg-lime-200 hover:bg-lime-300 rounded" disabled>
            <img src="../images/monitor_approve_thumbs_up_icon.webp" alt="approve" class="w-auto h-5 mr-2">
            Approve
        </button>
        <button id="reject" class="flex items-center px-2 py-1 bg-red-200 hover:bg-red-300 rounded" disabled>
            <img src="../images/monitor_reject_thumbs_down_icon.webp" alt="reject" class="w-auto h-5 mr-2">
            Reject
        </button>
    </div>
</div>

<hr class="border-gray-300">

<div class="flex justify-evenly mt-1 p-1">
    <button id="options" class="flex items-center px-2 py-1 bg-gray-200 hover:bg-gray-300 rounded">
        <img src="../images/settings_gear_icon.webp" alt="options" class="w-auto h-7 mr-2">
        Options
    </button>
    <button id="export-unaffiliated-logs" class="flex items-center px-2 py-1 bg-gray-200 hover:bg-gray-300 rounded"
            title="Most logs from this are the ones not affiliated with any task; however, some of the logs exported with this are some messages from the very beginning or the very end of each task">
        <img src="../images/misc_logs_export_icon.webp" alt="export logs" class="w-auto h-7 mr-2">
        Download misc logs
    </button>
</div>

<!-- Status details will be added to the tooltip dynamically when it is being made visible -->
<span id="status-details-tooltip"
      class="hidden absolute bg-white border border-gray-300 p-2 rounded shadow-lg max-w-full overflow-y-auto">
</span>
</body>
</html>